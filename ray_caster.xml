<mujoco model="ray_caster_test">
  <compiler autolimits="true" />

  <extension>
    <plugin plugin="mujoco.sensor.ray_caster" />
    <plugin plugin="mujoco.sensor.ray_caster_camera" />
    <plugin plugin="mujoco.sensor.ray_caster_lidar" />
  </extension>

  <asset>
    <texture name="plane" type="2d" builtin="checker" rgb1=".1 .1 .1" rgb2=".9 .9 .9"
      width="512" height="512" mark="cross" markrgb=".8 .8 .8" />
    <material name="plane" reflectance="0.3" texture="plane" texrepeat="1 1" texuniform="true" />
  </asset>

  <visual>
    <headlight ambient=".7 .7 .7" diffuse=".2 .2 .2" specular="0.1 0.1 0.1" />
    <map znear="0.01" />
    <scale contactwidth=".02" contactheight=".5" />
  </visual>

  <worldbody>
    <geom name="floor" pos="0 0 0" size="0 0 .25" type="plane" material="plane"
      condim="3" />
    <light directional="true" ambient=".3 .3 .3" pos="30 30 30" dir="0 -.5 -1"
      diffuse=".5 .5 .5" specular=".5 .5 .5" />
    <body pos="0 0 1">
      <freejoint />
      <geom type="sphere" size=".1" rgba=".5 .5 .5 .3" />
      <camera name="RayCasterCamera" xyaxes="0 -1 0 0 0 1" />
    </body>
    <body pos="1 0 1">
      <freejoint />
      <geom type="sphere" size=".2" rgba=".5 .5 .5 .9" />
    </body>
    <body pos="0 2 2">
      <freejoint />
      <geom type="sphere" size=".1" rgba=".5 .5 .5 .3" />
      <camera name="RayCaster" />
    </body>

    <body pos="0 -2 2">
      <freejoint />
      <geom type="sphere" size=".1" rgba=".5 .5 .5 .3" />
      <camera name="RayCasterLidar" xyaxes="0 -1 0 0 0 1" />
    </body>
  </worldbody>

  <sensor>

    <plugin name="raycastercamera" plugin="mujoco.sensor.ray_caster_camera" objtype="camera"
      objname="RayCasterCamera">
      <config key="focal_length" value="11.41" />
      <config key="horizontal_aperture" value="20.995" />
      <config key="size" value="32 16" />
      <config key="dis_range" value="0.01 3" />
      <config key="vertical_aperture" value="12.64" />

      <config key="draw_deep_ray" value="1 5 0 1 1 0.5 1" />
      <config key="draw_deep_ray_ids" value="1 10 1 0 0 0.5 1 2 3 4 5 30" />
      <config key="draw_deep" value="1 5 0 1 0" />
      <config key="draw_hip_point" value="1 0.02" />

      <config key="sensor_data_types" value="image inv_image pos_w pos_b" />
      <config key="noise_type" value="uniform" />
      <config key="noise_cfg" value="-0.1 0.1 1" />

    </plugin>

    <plugin name="raycaster" plugin="mujoco.sensor.ray_caster" objtype="camera"
      objname="RayCaster">
      <config key="type" value="yaw" />
      <config key="resolution" value="0.2" />
      <config key="size" value="1.0 2.0" />
      <config key="dis_range" value="0.01 6" />

      <config key="draw_deep_ray" value="1 5 0 1 1 0.5 1" />
      <config key="draw_deep_ray_ids" value="1 10 1 0 0 0.5 1 2 3 4 5 30" />
      <config key="draw_deep" value="1 5 0 1 0" />
      <config key="draw_hip_point" value="1 0.02" />

      <config key="sensor_data_types" value="inv_image_noise image_noise" />
      <config key="noise_type" value="uniform" />
      <config key="noise_cfg" value="-0.1 0.1 1" />

    </plugin>

    <plugin name="raycasterlidar" plugin="mujoco.sensor.ray_caster_lidar" objtype="camera"
      objname="RayCasterLidar">
      <config key="fov_h" value="200" />
      <config key="fov_v" value="50" />
      <config key="size" value="100 50" />
      <config key="dis_range" value="0.01 6" />

      <config key="draw_deep_ray" value="1 5 0 1 1 0.5 1" />
      <config key="draw_hip_point" value="1 0.02" />

      <config key="sensor_data_types" value="inv_image_noise image_noise" />
      <config key="noise_type" value="uniform" />
      <config key="noise_cfg" value="-0.1 0.1 1" />

    </plugin>

  </sensor>
</mujoco>